# 移动端访问配置

## 问题说明
移动端访问时出现 "Network Error" 是因为：
1. 后端默认只监听 localhost (127.0.0.1)
2. 前端配置的 API 地址也是 localhost

## 解决方案

### 1. 后端已配置为监听所有网络接口
后端现在监听在 `0.0.0.0:8080`，允许外部设备访问。

### 2. 前端已配置为使用局域网IP
API地址已更新为：`http://192.168.10.247:8080/api`

### 3. 移动端访问方式

#### 方式1：通过局域网IP访问（推荐）
1. 确保移动端和电脑在同一WiFi网络
2. 在移动端浏览器访问：`http://192.168.10.247:5173`
3. 或者在移动端浏览器访问后端：`http://192.168.10.247:8080`

#### 方式2：使用Vite的外部访问功能
启动前端时使用：
```bash
npm run dev -- --host
```
然后移动端访问显示的外部地址（如 `http://192.168.10.247:5173`）

## 注意事项

### IP地址可能变化
如果IP地址发生变化，需要：
1. 查看新的IP地址：
   ```bash
   ipconfig getifaddr en0
   ```
2. 更新 `frontend/.env.development.local` 文件中的IP地址
3. 重启前端和后端服务

### 防火墙设置
- macOS：确保"系统偏好设置" > "安全性与隐私" > "防火墙"允许传入连接
- 或临时关闭防火墙测试

### 网络要求
- 移动端和开发机必须在同一局域网
- 不能使用访客网络（可能有隔离限制）

## 测试连接

### 测试后端
```bash
curl http://192.168.10.247:8080/api/auth/me
```

### 测试前端
```bash
curl http://192.168.10.247:5173
```

## 常见问题

**Q: 无法连接？**
1. 检查移动端是否在同一WiFi
2. 检查防火墙设置
3. 确认后端正在运行：`lsof -i :8080`
4. 确认前端正在运行：`lsof -i :5173`

**Q: IP地址变了怎么办？**
重新执行 `ipconfig getifaddr en0` 获取新IP，然后更新配置文件

**Q: 能在公网访问吗？**
需要配置端口转发或使用 ngrok 等工具，不建议在生产环境使用
